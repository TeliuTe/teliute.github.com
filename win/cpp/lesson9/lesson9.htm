<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-cn">

<head>
<meta http-equiv="Content-Language" content="en-us">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<meta name="author" content="TeliuTe" />
<meta name="Copyright" content="TeliuTe,86团学校,基础教程网" />
<meta name="description" content="基础教程网,TeliuTe系列教程，一步一步教你学会使用电脑" />
<meta name="keywords" content="Flash,Photoshop,3DS Max,VB,VC,Frongpage,XP,TeliuTe,86团学校,教程,基础,入门" />
<title>VC++基础|画点程序</title>
</head>

<body bgcolor="#CCFFFF" vlink="#0000FF">

<p align="center"><b><font color="#FF0000" size="6" face="华文中宋">Windows </font></b><font face="华文彩云" color="#FF0000" size="6">编程</font><font face="华文彩云" color="#FF0000" size="6">基础</font></p> 
                
                 
<p align="left" style="line-height: 150%; margin: 0"><font color="#0000FF">九、画点程序　</font><font face="宋体"><a href="../index.htm">返回</a></font>          
          
               
</p>         
                
                 
<p align="left" style="line-height: 150%; margin: 0">　          
          
               
</p>         
                
                 
<p style="line-height: 150%; margin: 0" align="left">　<font color="#0000FF">图形设计</font>在电脑中占有举足轻重的地位，我们常见的<font color="#800000">绘图</font>程序有Windows中的画图，Adobe的PhotoShop，以及Flash动画和3D   
<font face="Arial">M</font>ax等等，</p>   
                
                 
<p style="line-height: 150%; margin: 0" align="left">　</p>   
                
                 
<p style="line-height: 150%; margin: 0" align="left"><font color="#800000">　多媒体</font>软件开拓了我们的视野，也改变了我们的生活，下面我们通过一个例子来学习绘图世界的<font color="#800000">基础</font>——画点：</p>   
                
                 
<p style="line-height: 150%; margin: 0" align="left">　</p>   
                
                 
<p style="line-height: 150%; margin: 0" align="left">　<font color="#0000FF">1、画点</font>也是一个<font color="#800000">设备</font>输出，需要向系统提出申请，画点的<font color="#800000">函数</font>是<font face="宋体"><b>SetPixel(x,y,RGB(255:255:255));</b></font>其中x,y是<font color="#800000">指定</font>点的位置，<font color="#800000">RGB</font>是红绿蓝三元色，指定点的<font color="#800000">颜色</font>；</p>      
                
                 
<p style="line-height: 150%; margin: 0" align="left">　</p>      
                
                 
<p style="line-height: 150%; margin: 0" align="left">　<font color="#0000FF">2、启动</font>VC，新建一个名为<font color="#800000">Pixel</font>的<b><font face="宋体">Win32 
</font><font face="Arial">A</font><font face="宋体">pplication</font></b>工程，再新建一个相同名称的<font color="#800000">头文件</font>和<font color="#800000">源程序</font>文件，在头文件中输入函数的<font color="#800000">申明</font>，在源程序中输入窗口<font color="#800000">框架</font>代码（轻车熟路了）；</p>   
                
                 
<p style="line-height: 150%; margin: 0" align="left">　</p>   
                
                 
<p style="line-height: 150%; margin: 0" align="left">　<font color="#0000FF">3、加入</font>消息处理函数过程，画点是用鼠标，因此需要处理鼠标按键消息<font face="Arial">WM_LBUTTONDOWN</font>以及鼠标拖动的消息<font face="Arial">WM_MOUSEMOVE</font>，考考你：鼠标拖动和移动一不一样？</p>   
                
                 
<p style="line-height: 150%; margin: 0" align="left">　</p>   
                
                 
<p style="line-height: 150%; margin: 0" align="left">　消息处理过程<font face="Arial">MainWndProc</font>（<font color="#008000">绿色双斜杠部分是注释</font>），有的一行太长会自动折到下一行，代码如下：</p>      
                
                 
<p style="line-height: 150%; margin: 0" align="left"><br>  
<b>  
<font face="宋体">LRESULT </font><font face="Arial">A</font><font face="宋体">PIENTRY   
</font><font face="Arial">M</font><font face="宋体">ainWndProc(<br>    
				HWND hWnd,UINT message,WPAR</font><font face="Arial">AM</font><font face="宋体"> wParam, 
LPAR</font><font face="Arial">AM</font><font face="宋体"> lParam)<br>       
{<br>
&nbsp;&nbsp;&nbsp; HDC hdc;<br>       
&nbsp;&nbsp;&nbsp; P</font><font face="Arial">A</font><font face="宋体">INTSTRUCT ps;<br>       
&nbsp;&nbsp;&nbsp; </font> </b><font color="#0000FF"><b>switch</b></font><b><font face="宋体"> (message)<br>       
&nbsp;&nbsp;&nbsp; {<br>      
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></b><font color="#0000FF"><b>case</b></font><b><font face="宋体">       
 W</font><font face="Arial">M</font><font face="宋体">_LBUTTONDOWN:</font></b><font color="#008000">//接收到左键消息；</font><b><font face="宋体"><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></b><font color="#0000FF"><b>case</b></font><b><font face="宋体">       
 W</font><font face="Arial">M</font><font face="宋体">_RBUTTONDOWN:</font></b><font color="#008000">//接收到右键消息；</font><b><font face="宋体"><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; hdc=</font><font face="Arial">G</font><font face="宋体">etDC(hWnd);</font></b><font color="#008000">//获取设备；</font><font face="宋体"><b><br>     
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SetPixel(&nbsp; hdc,</b></font><font color="#008000">//画点函数；</font></p>         
                
                 
<p style="line-height: 150%; margin: 0" align="left"><font face="宋体"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       
LOWORD(lParam),&nbsp;&nbsp; HIWORD(lParam),</b><font color="#008000">//画点的位置x,y；</font><b><br>      
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (message==W</font><font face="Arial">M</font><font face="宋体">_LBUTTONDOWN)?RGB(0,0,255):R</font><font face="Arial">G</font><font face="宋体">B(255,0,0)&nbsp;       
);</font></b><font color="#008000">//画点的颜色；</font></p>   
                
                 
<p style="line-height: 150%; margin-top: 0; margin-bottom: 0"><b><font face="宋体">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       
</font></b><font color="#008000">//问号判断表达式?，消息==左键就返回第一个RGB蓝色，否则用后面第二个RGB颜色红色作为画点的颜色；</font><font face="宋体"><b><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ReleaseDC(hWnd,hdc);</b></font><font color="#008000">//释放设备；</font><b><font face="宋体"><br>     
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font><font color="#0000FF">break</font><font face="宋体">;<br>     
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font><font color="#0000FF">case</font><font face="宋体">      
 W</font><font face="Arial">M_M</font><font face="宋体">OUSE</font><font face="Arial">M</font><font face="宋体">OVE://鼠标移动消息<br>    
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font><font color="#0000FF">if</font><font face="宋体">(wParam &amp;   
</font><font face="Arial">M</font><font face="宋体">K_LBUTTON || wParam &amp; </font><font face="Arial">M</font><font face="宋体">K_RBUTTON)</font></b><font face="宋体"><font color="#008000">//检测是否有按键；</font><b><br>  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</b></font><font color="#008000">//移动同时还有鼠标按键，也就是拖动鼠标；</font><b><font face="宋体"><br>     
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; hdc=</font><font face="Arial">G</font><font face="宋体">etDC(hWnd);<br>    
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SetPixel(&nbsp;      
hdc,LOWORD(lParam),HIWORD(lParam),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (wParam &amp; </font><font face="Arial">M</font><font face="宋体">K_LBUTTON)?RGB(0,0,255):RGB(255,0,0)&nbsp;      
);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ReleaseDC(hWnd,hdc);<br>     
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>     
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font><font color="#0000FF">break</font><font face="宋体">;<br>     
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font><font color="#0000FF">case</font><font face="宋体">      
 W</font><font face="Arial">M</font><font face="宋体">_PAINT:</font></b><font color="#008000">//加一行标题提示；</font><b><font face="宋体"><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; hdc=BeginPaint(hWnd,&amp;ps);<br>     
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SetBk</font><font face="Arial">M</font><font face="宋体">ode(hdc,TRANSPARENT);</font></b><font color="#008000">//透明背景；</font><b><font face="宋体"><br>    
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TextOut(hdc,40,40,"按下鼠标左、右键画点：",lstrlen("按下鼠标左、右键画点："));<br>     
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      
TextOut(hdc,40,45,&quot;__________________&quot;,lstrlen(&quot;__________________&quot;));<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EndPaint(hWnd,&amp;ps);<br>     
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font><font color="#0000FF">break</font><font face="宋体">;<br>     
</font></b></p>   
                
                 
<p style="line-height: 150%; margin-top: 0; margin-bottom: 0"><b><font face="宋体">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      
</font><font color="#0000FF">case</font><font face="宋体">  W</font><font face="Arial">M</font><font face="宋体">_DESTROY:</font></b><font color="#008000">//退出；</font><b><font face="宋体"><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PostQuit</font><font face="Arial">M</font><font face="宋体">essage(0);<br>    
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font><font color="#0000FF">break</font><font face="宋体">;<br>     
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font><font color="#0000FF">default</font><font face="宋体">:<br>     
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font><font color="#0000FF">return</font><font face="宋体">(DefWindowProc(hWnd,message,wParam,lParam));<br>     
&nbsp;&nbsp;&nbsp; }<br>     
&nbsp;&nbsp;&nbsp; </font><font color="#0000FF">return</font><font face="宋体"> (0);<br>      
}</font></b></p>   
                
                 
<p style="line-height: 150%; margin: 0" align="left"><font color="#800000" face="宋体">　</font><font face="宋体"><font color="#800000">保存</font>一下文件，单击编译条上的“</font><font color="#800000">构建</font><font face="宋体">”按钮<img border="0" src="images/gjann.gif" width="23" height="23">，如果出现错误就仔细检查一下，然后单击“</font><font color="#800000">执行</font><font face="宋体">”按钮<img border="0" src="images/zhxann.gif" width="23" height="23">，试着用鼠标左键和右键写出自己的名字；</font></p>
                
                 
<p style="line-height: 150%; margin: 0" align="left">　</p>
<p style="line-height: 150%; margin: 0" align="left">　<font color="#0000FF">本节</font><font face="宋体">学习了在用户区绘图的基本代码设计，如果你成功地完成了练习，请继续学习下一课内容；</font></p>  
<p style="line-height: 150%; margin: 0" align="left"><font face="宋体"><a href="../index.htm">返回</a></font></p>  
<p style="line-height: 150%; margin: 0" align="left">　</p>  
<p style="line-height: 150%; margin: 0" align="left">　<a href="images/Pixel.exe">点点滴滴</a>  
 <font size="2">（在弹出的对话框中选择“<font color="#800000">运行</font>”、“<font color="#800000">运行</font>”）</font></p>   
                
                 
<p style="line-height: 150%; margin-top: 0; margin-bottom: 0">          
                 
                  
<font SIZE="1" color="#008000">  
本教程由86团学校TeliuTe制作|著作权所有</font></p>  
                
                 
<p style="line-height: 150%; margin-top: 0; margin-bottom: 0">          
                 
                  
<font color="#008000" size="1">基础教程网：<a href="http://teliute.org/">http://teliute.org/</a></font></p>  
<p style="line-height: 150%; margin-top: 0; margin-bottom: 0">          
                 
                  
<font SIZE="1" color="#008000">  
美丽的校园……  
</font>        
               
                
</p>  
               
                
<font color="green" style="font-size:12px"><script language="javascript" type="text/javascript" src="http://js.users.51.la/1132862.js"></script>
          	<noscript><a href="http://www.51.la/?1132862" target="_blank"><img alt="我要啦免费统计" src="http://img.users.51.la/1132862.asp" style="border:none" / width="20" height="20" /></a>
			</noscript></font><br /><br />
<div>

<table width="800" border="0" cellspacing="0" cellpadding="0" id="gg">
  <tr>
    <td>
	<script type="text/javascript"><!--
google_ad_client = "pub-2989083345397211";
google_ad_width = 728;
google_ad_height = 90;
google_ad_format = "728x90_as";
google_ad_type = "text";
//2007-09-15: new1
google_ad_channel = "9381269263";
google_ui_features = "rc:6";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
	</td>
  </tr>
  <tr>
    <td>
	<script type="text/javascript"><!--
google_ad_client = "pub-2989083345397211";
google_ad_width = 728;
google_ad_height = 90;
google_ad_format = "728x90_as";
google_ad_type = "image";
//2007-09-15: new1
google_ad_channel = "9381269263";
google_ui_features = "rc:6";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
	</td>
  </tr>
  <tr>
    <td>
	<script type="text/javascript"><!--
google_ad_client = "pub-2989083345397211";
google_ad_width = 728;
google_ad_height = 90;
google_ad_format = "728x90_as";
google_ad_type = "text";
//2007-09-15: new1
google_ad_channel = "9381269263";
google_ui_features = "rc:6";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
	</td>
  </tr>
</table>
</div>
               
                
                     
                     
<p align="center">转载和引用本站内容，请保留作者和本站链接。</p></body> </html>                     
